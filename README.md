#LR2-ghostlib
LR2のゴースト文字列をデコード(PG,GRとかに容易に解釈できる形に変換)
及びエンコード(判定の羅列からLR2で認識できるゴースト文字列に変換)するツール

変換方法の詳細は[ここ](/interpretation.md)

### 使用法
ghostlibをインポートした上で

* デコード

関数`ghost_to_hist`に引数として`LR2files/Database/Score/{username}.db`内`score`テーブルの`ghost`カラムに格納されている文字列を与える。LR2IRから持ってこられるものを用いてもOK。

* エンコード

上記の方法で定義される文法に従う文字列(デフォルトでは/[@A-E]*ZZ?/)を関数`hist_to_ghost`に引数として与える。

### 結果の見方(デコード)
入力`[0-9@A-Za-z]*ZZ?`に対し`[@A-E]*ZZ?`を返す。これは曲が開始してから終了あるいは中断するまでに判定が発生したノートの判定履歴をノートの順に表す。

それぞれの文字の意味は(元のゴースト文字列でも同様だが、)

|E|D|C|B|A|@|
|:-----:|:---:|:--:|:-:|:----------:|:------:|
|perfect|great|good|bad|poor(見逃し)|poor(空)|

である。たとえば、
```
  EBACD@ECZ
```
は

|nノート目|1|2|3|4|5|6|7|
|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
|判定|PG|BD|PR|GD|GR|PG|GD|
(5-6ノート間に空プア)

と言った感じ。`Z`は判定履歴の終了を表す。
